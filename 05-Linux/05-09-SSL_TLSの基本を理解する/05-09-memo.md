# SSL/TLS の基本を理解する

## 受講前

### 受講前流し読み時チェック

- [x] 必要そうな前提知識はなにか
  - なし
- [x] fjbc に閉じていないサービス（VPS 等）が必要か
  - なし
- [x] 成果物の提出が必要か
  - なし
- [x] 手順書が必要か
  - なし

## 受講中

### フリースタイルメモ

画像は- [図解で学ぶネットワークの基礎：SSL編](https://xtech.nikkei.com/it/article/COLUMN/20071002/283518/)より

- SSL: Secure Socket Layer

- 暗号化と相手認証の機能を持つ
![image](https://user-images.githubusercontent.com/388166/155834134-5cd81bfa-d7f1-41c4-b4f2-7b0211602113.png)

- アプリとTCPの間に位置する
![image](https://user-images.githubusercontent.com/388166/155834217-2e1429b0-e409-44ef-8ed9-0dbd51966ae1.png)

- SSL はもともと、ネットスケープ・コミュニケーションズが開発した独自プロトコル。Web 技術の発展とともに、SSL ベースで発生した技術がTLS

- 共通鍵方式と公開鍵方式（SSL はこの療法を使う）
![image](https://user-images.githubusercontent.com/388166/155834340-e4aff785-1287-49cc-a87d-cd617faecac0.png)

- SSL 通信の概要
![image](https://user-images.githubusercontent.com/388166/155834466-b6f77813-7550-44f4-987b-32bb5c0d09ab.png)
1. クライアントがサーバーにSSL通信の要求を送る
2. サーバーは，自身の公開鍵が入った証明書をクライアントに返信する
3. クライアントは，入手したサーバーの公開鍵を使って「アプリケーション同士の暗号通信に使う共通鍵」を暗号化してサーバーに送る
4. こうして共有した共通鍵を使って，クライアントとサーバーは，本来の目的であるアプリケーション間でやりとりするデータの暗号化/復号を，高速に処理する

- 
![image](https://user-images.githubusercontent.com/388166/155834715-8ca2e43c-7ba4-41e9-920d-ef4f89e2405c.png)
1. クライアントがサーバーに，暗号通信で使う暗号方式などを提案する
2. サーバーは，提案のあった方式から適切なものを一つ選んで返答する
3. サーバーは，クライアントにCertificateメッセージを使ってサーバー証明書を送る
4. 証明書の情報を送り終えたら，そのことを知らせる
5. クライアントは，(3)で入手したサーバー証明書からサーバーの公開鍵を取り出し，この公開鍵を使って暗号通信に使う共通鍵の基になる秘密の値（プレマスタ・シークレット）を暗号化して送信する。これがClientKeyExchangeメッセージである
6. クライアントは，これまで決めた暗号方式の採用を宣言する
7. ハンドシェークの終了をサーバーに知らせる
8. サーバーもクライアントと同様に暗号方式の採用を宣言する
9. ハンドシェークの終了をクライアントに知らせる

- サーバー証明書は，サーバーの管理者が，「認証局」と呼ばれる組織に申請して発行してもらう
- 証明書の検証の実際の流れ
![image](https://user-images.githubusercontent.com/388166/155835299-7a26454d-aba3-4f4c-ba4b-c6c48c7edfa9.png)
1. クライアントにはサーバー証明書とルート認証局の証明書が送られてくる。クライアントは，自分にインストールされている「信頼できるルート認証局の証明書」をチェックし，その中に一致する証明書があったら，そのルート認証局の証明書は信頼できると判断する
2. クライアントは，ルート認証局の証明書の中に入っている公開鍵を使って，サーバー証明書に付けられた署名を検証する。具体的には，「署名をルート認証局の公開鍵で復号したデータ」と「サーバー証明書のハッシュ値」が一致するかどうかを確かめる。一致すれば，そのサーバー証明書は，確かにルート認証局から署名を受けたサーバー証明書であることがわかる
3. これで，サーバー証明書が信頼できることがわかった。ということは，サーバー証明書の中にある公開鍵も信頼できることになる）。クライアントはこの公開鍵を使って，SSL通信を実行する。

- SSL の仕組み しか読んでない

## 受講後

### 講座内容を要約する
